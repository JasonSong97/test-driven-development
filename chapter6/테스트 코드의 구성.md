# 테스트 코드의 구성

## 테스트 코드의 구성 요소

테스트 코드는 3가지로 구성된다.

```java
@Test
void test() {
    // given

    // when

    // then
}
```

보편적으로 위에와 같은 구조를 가져가야 한다. 하지만 해당 구조에 너무 집착하지는 말자.

## 외부 상태와 테스트 어려움

테스트에 영향을 주는 외부 요인은 파일, DBMS, 외부 서버 등 다양하다.

예를 들어 자동이체 등록 기능을 생각하자. 이를 위해 금융 회사에서 제공하는 REST API를 사용한다면, 자동 이체 등록 기능에 대한 테스트는 다음 상황이 필요하다.

> - REST API 응답 결과가 유효한 계좌 번호인 상황
> - REST API 응답 결과가 유효하지 않은 계좌 번호인 상황
> - REST API 서버에 연결할 수 없는 상황
> - REST API 서버에서 응답을 5초 이내에 받지 못하는 상황

테스트 대상이 아닌 외부 요인은 테스트 코드에서 다루기 힘든 존재다. 외부 상황은 테스트 코드에서 마음대로 제어할 수 없는 경우다.

만약 테스트 상황과 결과에 외부 상황이 영향을 주는 경우는 대역을 사용해서 테스트를 작성해야 한다. 대역은 테스트 대상이 의존하는 대상의 살제 구현을 대신하는 구현인데 이 대역을 통해서 외부 상황이나 결과를 대체할 수 있다.